<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>智慧能耗云</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" href="./static/css/font.css">
	<link rel="stylesheet" href="./static/css/main.css">
	<script type="text/javascript" src="./lib/layui/layui.js" charset="utf-8"></script>
</head>

<body>
	<div class="main-content">
		<div class="search-content">
			<div class="layui-col-md12">
				<div class="layui-inline">
					<div class="layui-input-inline input-date">
						<input type="text" class="layui-input" id="test6" placeholder="请选择日期">
					</div>
					<button type="button" class="layui-btn">查询</button>
					<button id="new-order" type="button" class="layui-btn">创建</button>
				</div>
			</div>
		</div>
		<div class="tab-content">
			<div class="layui-tab layui-tab-card">
				<ul class="layui-tab-title">
					<li class="layui-this">电站</li>
				</ul>
				<div class="layui-tab-content">
					<div class="layui-tab-item layui-show">
						<div class="layui-form-item">
							<label class="layui-form-label">级别类型:</label>
							<div class="layui-input-block">
								<div class="layui-btn-group">
									<button type="button" class="layui-btn">全部</button>
									<button type="button" class="layui-btn layui-btn-primary">消缺工单</button>
									<button type="button" class="layui-btn layui-btn-primary">告警工单</button>
									<button type="button" class="layui-btn layui-btn-primary">抢修工单</button>
									<button data-type="4" type="button"
										class="layui-btn layui-btn-primary">随工工单</button>
									<button type="button" class="layui-btn layui-btn-primary">电试工单</button>
									<button type="button" class="layui-btn layui-btn-primary">操作工单</button>
								</div>
							</div>
						</div>
						<form class="layui-form" action="" lay-filter="searchForm" id="searchForm">
							<div class="layui-form-item">
								<label class="layui-form-label">处理状态:</label>
								<div class="layui-input-block">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="未开始">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="执行中">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="已完成">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">逾期状态:</label>
								<div class="layui-input-block">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="逾期">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">条件筛选:</label>
								<div class="layui-input-block">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="我发起的"
										checked="">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="我执行的">
								</div>
							</div>
							<div class="layui-form-item work" style="display: none;">
								<label class="layui-form-label">随工类型:</label>
								<div class="layui-input-block">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="项目施工">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="故障抢修">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="售后服务">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="送电">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="检修">
									<input type="checkbox" name="like1[read]" lay-skin="primary" title="预防性试验">
									<input type="checkbox" name="like1[write]" lay-skin="primary" title="其他">
								</div>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
		<div class="table-content">
			<div class="layui-card">
				<div class="layui-card-body">
					<table class="layui-table" lay-filter="demo" lay-data="{
						id:'demo',
						url:'',
						page:false,
						cellMinWidth: 80,
						data:[
						{
						'id': 10000,
						'username': 'user-0',
						'sex': '女',
						'city': '城市-0',
						'sign': '签名-0',
						'time':'2019-12-11'
						},
						{
						'id': 10000,
						'username': 'user-0',
						'sex': '女',
						'city': '城市-0',
						'sign': '签名-0',
						'time':'2019-12-11'
						},
						],
						method:'post'  //提交方式
						}">
						<thead>
							<tr>
								<th lay-data="{field:'id',align:'center'}">工单编号</th>
								<th lay-data="{field:'username',align:'center',width:500,}">内容</th>
								<th lay-data="{field:'sex',align:'center'}">类型</th>
								<th lay-data="{field:'city',align:'center'}">状态</th>
								<th lay-data="{field:'sign',align:'center'}">处理意见</th>
								<th lay-data="{field:'time',align:'center'}">创建日期</th>
								<th lay-data="{fixed: 'right',align:'center', toolbar: '#barDemo'}">查看</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
	</div>
	<script type="text/html" id="barDemo">
		<a class="layui-btn layui-btn-primary layui-btn-sm" lay-event="detail">详情</a>
	</script>
	<script type="text/html" id="barDemo2">
		<a class="layui-btn layui-btn-primary layui-btn-sm" lay-event="processing">处理</a>
	</script>
	<script type="text/javascript">
		//一般直接写在一个js文件中
		layui.use(['layer', 'form', 'laydate', 'table','upload'], function () {
			var layer = layui.layer,
				form = layui.form,
				$ = layui.jquery,
				laydate = layui.laydate,
				upload = layui.upload;
				table = layui.table;

			laydate.render({
				elem: '#test6',
				range: true
			});
			laydate.render({
				elem: '#test4',
				range: true
			});
			laydate.render({
				elem: '#test5',
				type: 'datetime'
			});
			laydate.render({
				elem: '#test7',
				type: 'datetime'
			});
			laydate.render({
				elem: '#test8',
				type: 'datetime'
			});
			//指定允许上传的文件类型
			upload.render({
				elem: '#upload',
				url: '',
				accept: 'file', //普通文件
			    done: function(res){
				console.log(res)
				}
			});
			$("#reset").click(function () {
				$("#searchForm")[0].reset();
				layui.form.render();
			})
			$("#new-order").click(function () {
				layer.open({
					type: 1,
					title: '创建工单',
					shade: false,
					resize: false,
					content: $('#dialog-new-order'),
					btn: ['确定', '取消'],
					area: ['600px', '200px'],
					yes: function (index, layero) {
						layer.open({
							type: 1,
							title: '创建工单',
							shade: false,
							resize: false,
							content: $('#order-form'),
							area: ['60%', '70%'],
							yes: function (index, layero) {
								alert("确定按钮点击")
							},
							success: function (index) {
								table.render({
									elem: '#testList',
									height:260,//固定值
									url: '', //数据接口
									data: [{
										'id': 10000,
										'username': 'user-0',
										'sex': '女',
										'city': '城市-0',
										'sign': '签名-0',
										'time': '2019-12-11'
									},
									{
										'id': 10000,
										'username': 'user-0',
										'sex': '女',
										'city': '城市-0',
										'sign': '签名-0',
										'time': '2019-12-11'
									}
									],
									cols: [
										[ //表头
											{
												field: 'id',
												title: '工单编号',
												width: 180
											}, {
												field: 'username',
												title: '级别',
												width: 80
											}, {
												field: 'sex',
												title: '状态'
											}, {
												field: 'city',
												title: '缺陷描述'
											}, {
												field: 'sign',
												title: '缺陷来源'
											}, {
												field: 'time',
												title: '发生时间'
											}, {
											title: '操作',
											width: 150,
											align: 'center',
											toolbar: '#barDemo2'
										}
										]
									]
								})
							}
						});
					}
				})
			})
			//监听工具条
			table.on('tool(demo)', function (obj) {
				var data = obj.data;
				if (obj.event === 'detail') {
					layer.open({
						type: 1,
						title: '工单详情',
						shade: false,
						resize: false,
						content: $('#dialog1'),
						btn: ['确定', '取消'],
						area: ['88%', '50%'],
						yes: function (index, layero) {
							alert("确定按钮点击")
						},
						success: function (index) {
							table.render({
								elem: '#demo2',
								url: '' //数据接口
									,
								data: [{
										'id': 10000,
										'username': 'user-0',
										'sex': '女',
										'city': '城市-0',
										'sign': '签名-0',
										'time': '2019-12-11',
										'time1': '2019-12-11',
										'time2': '2019-12-11',
										'time3': '2019-12-11'
									},
									{
										'id': 10000,
										'username': 'user-0',
										'sex': '女',
										'city': '城市-0',
										'sign': '签名-0',
										'time': '2019-12-11',
										'time1': '2019-12-11',
										'time2': '2019-12-11',
										'time3': '2019-12-11'
									}
								],
								cols: [
									[ //表头
										{
											field: 'id',
											title: '工单编号',
											width: 80
										}, {
											field: 'username',
											title: '告警编号',
											width: 80
										}, {
											field: 'sex',
											title: '计划开始时间',
											width: 160,
										}, {
											field: 'city',
											title: '计划结束时间',
											width: 160
										}, {
											field: 'sign',
											title: '回复上一步内容'
										}, {
											field: 'time',
											title: '本环节处理情况'
										}, {
											field: 'time1',
											title: '下一步处理意见'
										}, {
											field: 'time2',
											title: '补充信息'
										}, {
											field: 'time3',
											title: '作业文档地址',
											width: 135
										}, {
											title: '操作',
											width: 150,
											align: 'center',
											toolbar: '#barDemo2'
										}
									]
								]
							});
						}
					});
				}
			});
			$(".layui-tab-content .layui-btn-group button").click(function () {
				$(this).removeClass("layui-btn-primary").siblings().addClass("layui-btn-primary")
				if ($(this).attr('data-type') === '4') {
					$('.work').show()
				} else {
					$('.work').hide()
				}
			})
			$("#dialog-new-order button").click(function () {
				$(this).removeClass("layui-btn-primary").siblings().addClass("layui-btn-primary")
			})
		});
	</script>
</body>
<!-- 弹框 -->
<div id="dialog1" style="display: none;">
	<table id="demo2" lay-filter="test"></table>
</div>
<!-- 创建工单 -->
<div id="dialog-new-order" class="none">
	<div class="layui-btn-group">
		<button type="button" class="layui-btn layui-btn-primary">消缺工单</button>
		<button type="button" class="layui-btn layui-btn-primary">告警工单</button>
		<button type="button" class="layui-btn layui-btn-primary">抢修工单</button>
		<button data-type="4" type="button" class="layui-btn layui-btn-primary">随工工单</button>
		<button type="button" class="layui-btn layui-btn-primary">电试工单</button>
		<button type="button" class="layui-btn layui-btn-primary">操作工单</button>
	</div>
</div>
<div id="order-form" class="none">
	<form class="layui-form" action="" lay-filter="orderForm" id="orderForm">
		<div class="layui-form-item">
			<div class="layui-col-sm6">
				<label class="layui-form-label">工单类型:</label>
				<div class="layui-input-block">
					<input type="text" name="title" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-sm6">
				<label class="layui-form-label">处理意见:</label>
				<div class="layui-input-block">
					<input type="text" name="title" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-col-sm6">
				<label class="layui-form-label">创建人:</label>
				<div class="layui-input-block">
					<input type="text" name="title" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-col-sm6">
				<label class="layui-form-label">创建时间:</label>
				<div class="layui-input-block">
					<input type="text" class="layui-input" id="test5" placeholder="HH:mm:ss">
				</div>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-col-sm6">
				<label class="layui-form-label">执行团队:</label>
				<div class="layui-input-block">
					<select name="interest">
						<option value=""></option>
						<option value="0">写作</option>
						<option value="1" selected="">阅读</option>
						<option value="2">游戏</option>
						<option value="3">音乐</option>
						<option value="4">旅行</option>
					</select>
				</div>
			</div>
			<div class="layui-col-sm6">
				<label class="layui-form-label">执行人员:</label>
				<div class="layui-input-block">
					<select name="interest" lay-filter="aihao">
						<option value=""></option>
						<option value="0">写作</option>
						<option value="1" selected="">阅读</option>
						<option value="2">游戏</option>
						<option value="3">音乐</option>
						<option value="4">旅行</option>
					</select>
				</div>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-col-sm6">
				<label class="layui-form-label">计划开始:</label>
				<div class="layui-input-block">
					<input type="text" class="layui-input" id="test8" placeholder="HH:mm:ss">
				</div>
			</div>
			<div class="layui-col-sm6">
				<label class="layui-form-label">计划终止:</label>
				<div class="layui-input-block">
					<input type="text" class="layui-input" id="test7" placeholder="HH:mm:ss">
				</div>
			</div>
		</div>
		<div class="layui-form-item layui-form-text">
			<label class="layui-form-label">补充信息:</label>
			<div class="layui-input-block">
				<textarea placeholder="请输入内容" class="layui-textarea"></textarea>
			</div>
		</div>
		<div class="layui-form-item layui-form-text">
			<label class="layui-form-label">作业文档:</label>
			<div class="layui-input-block">
					<button type="button" class="layui-btn" id="upload">上传文件</button>
			</div>
		</div>
		<div class="layui-form-item layui-form-text">
			<label class="layui-form-label">任务列表:</label>
			<div class="layui-input-block test-box">
				<table id="testList" lay-filter="testList"></table>
				<button type="button" class="layui-btn">新增任务</button>
			</div>
		</div>
		<div class="layui-form-item" style="text-align: right;">
			<div class="layui-input-block">
				<button type="submit" class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
	</form>
</div>

</html>